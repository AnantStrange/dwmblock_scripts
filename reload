#! /bin/sh

shopt -s nocasematch
if [ ! -z "$1" ];then
        a=$1
else
        a=$(echo -e "Dwmblocks\nSXHKD\nDWM\nDunst\nTransmission\nI2P Router" | dmenu -p "Reload >")
fi

case "$a" in 
        "Dwmblocks")
                killall dwmblocks;
                dwmblocks &
                ;;

        "Dunst")
                killall dunst;
                dunst &
                ;;

        "DWM")
                pkill -HUP dwm >> /tmp/dwm_log
                ;;

        "SXHKD")
                killall -SIGUSR1 sxhkd
                #out=$(killall sxhkd)
                #sxhkd &
                ;;

        "Transmission")
                if [ ! -z "$(ps -aux | grep transmission | grep daemon)" ]
                then
                    a=$(echo -e "Restart\nStop")
                    if [ $a == "Restart" ];then
                        out=$(systemctl restart transmission)
                    else
                        out=$(systemctl stop transmission)
                    fi
                else
                    a=$(echo -e "Start\nNothing"| dmenu -p "Transmission Daemon not running. What to do? >")
                    if [ $a == "Start" ];then
                        out=$(systemctl start transmission)
                    fi
                fi
                ;;

        "I2P Router")
                if [ -z "$(i2prouter status | grep not running)" ]
                then
                    a=$(echo -e "Start\nNothing" | dmenu -p "I2P is not running. What to do? >")
                    if [ $a == "Start" ];then
                        out=$(i2prouter start)
                    fi
                else
                    a=$(echo -e "Start\nNothing" | dmenu -p "I2P is running. What to do? >")
                    if [ $a == "Nothing" ];then
                        out=$(i2prouter stop) 
                    fi
                fi
                ;;
esac

[ ! -z "$a" ] && [ ! -z "$out" ] && dunstify "$a" "$out"


